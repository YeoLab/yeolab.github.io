<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.dropotron.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/skel-layers.min.js"></script>
    <script src="/js/init.js"></script>
    <script src="/js/lightbox.js"></script>
    <link rel="stylesheet" href="/css/pygment.css"/>
    <noscript>
        <link rel="stylesheet" href="/css/skel.css" />
        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/style-noscript.css" />
        <link href="/css/lightbox.css" rel="stylesheet"/>
    </noscript>
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <!-- <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="//cdn.materialdesignicons.com/1.3.41/css/materialdesignicons.min.css">
    <link  href="http://fonts.googleapis.com/css?family=Anonymous+Pro:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css" >
    <!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
    <!--[if lte IE 9]><link rel="stylesheet" href="/css/ie/v9.css" /><![endif]-->
    <style>
    body, #skel-layers-wrapper {
    background: #CFF4EF;}
    </style>

    <!-- Favicon for all devices and sizes -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="/mstile-310x310.png" />


    <title>TSCC_Onboarding | Yeo Lab </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width">
</head>

<body class=" loading">



    <!-- Header -->
    <header id="header" >
        <h1 class="logo">
            <a href="..">Yeo Lab</a>
        </h1>
        <nav id="nav">
            <ul>
                <!-- <li class="current"><a href="index.html">Welcome</a></li> -->
                    <li><a href="/research/">Research</a></li>
                    <li><a href="/papers/">Papers</a></li>
                    <li><a href="/funding/">Funding</a></li>
                    <li><a href="/software/">Software</a></li>
                    <li><a href="/links/">Links</a></li>
                <li><a href="/people" class="button special">People</a></li>
            </ul>
        </nav>
    </header>

<style>
.image:before{
  background-image: None;
}
.mdi {
  font-size: 9em;
  margin-top: -150px;
}

</style>


<!-- Main -->
<article id="main">

  <header class="special container">
    <span class="mdi mdi-account-multiple"></span>
    <h2>TSCC_Onboarding</h2>
    <!-- add page sub title here -->
    <!-- <p>Where that in the center faces the nameless horrors alone.</p> -->
  </header>

  <!-- One -->
  <section class="wrapper style4 container">

    <!-- Content -->
      <div class="content">
        <section>
          <!-- <a href="#" class="image feature"><img src="images/pic04.jpg" alt="" /></a> -->
          <p><h1><span class="caps">TSCC</span>&nbsp;Onboarding</h1>
<p><strong>Authors</strong>: Clarence Mah, Brian Yee<br>
<strong>Last Updated</strong>:&nbsp;5-07-20</p>
<h2>About <span class="caps">TSCC</span></h2>
<p>The Triton Shared Computing Cluster (<span class="caps">TSCC</span>) houses our 640-core supercomputer for all our computing needs. While this guide covers most of the essentials, see the <a href="https://www.sdsc.edu/support/user_guides/tscc.html">official <span class="caps">TSCC</span> user guide</a> for a much more comprehensive&nbsp;overview.</p>
<p>The main contacts for questions about <span class="caps">TSCC</span> are the <code>dry lab</code> and <code>TSCC users</code> mailing lists. The main contact for problems with <span class="caps">TSCC</span> is <a href="tscc-support@sdsc.edu">Eva Hocks</a>.</p>
<h1>Additional&nbsp;Guides</h1>
<p><a href="TSCC_Onboarding/Jupyter-notebooks-on-TSCC.md">Jupyter notebooks on <span class="caps">TSCC</span></a></p>
<p><a href="TSCC_Onboarding/Manage-your-compute-jobs-on-TSCC.md">Manage your compute jobs on <span class="caps">TSCC</span></a></p>
<p><a href="TSCC_Onboarding/Access-TSCC-files-locally-with-SSHFS.md">Access <span class="caps">TSCC</span> files locally with <span class="caps">SSHFS</span></a></p>
<p><a href="TSCC_Onboarding/Make-a-virtual-conda-environment-on-TSCC.md">Make a virtual conda environment on <span class="caps">TSCC</span></a></p>
<p><a href="Running-the-eCLIP-Pipeline-on-TSCC.md">Running the eCLIP Pipeline on <span class="caps">TSCC</span></a></p>
<h1>Initial&nbsp;Setup</h1>
<p>Your first login session should include some of the following commands, which will familiarize you with the cluster, and help you setup common&nbsp;properties.</p>
<h2>Log&nbsp;on!</h2>
<p>First, log in to <span class="caps">TSCC</span>!</p>
<div class="highlight"><pre><span></span>ssh YOUR_TSCC_USERNAME@tscc-login2.sdsc.edu
</pre></div>


<p><span class="caps">TSCC</span> has two login nodes, <code>login1</code> and <code>login2</code> for load-balancing (i.e. so if you just log on to <code>tscc.sdsc.edu</code>, it’ll choose whichever login node is less occupied. We’re logging in to a specific node because then we’ll always have our screen session on the same node) This is logging specifically on to <code>login2</code>. You can do <code>login1</code> if you like, as well, to balance it out&nbsp;:)</p>
<h2>Organize your home&nbsp;directory</h2>
<p>Your data and analyses go in these&nbsp;directories:</p>
<ul>
<li><code>/home/$USER</code>: your home directory (100 <span class="caps">GB</span>)</li>
<li><code>/projects/ps-yeolab3/$USER</code>: your shared lab directory (permanent&nbsp;storage)</li>
<li>
<p><code>/projects/ps-yeolab4/seqdata</code>: where all sequencing data is stored unless otherwise&nbsp;specified</p>
<h3>All raw data (fastqs, BCLs, ABFs etc.) should reside in <code>seqdata</code> and should be considered <strong>permanent</strong>. <strong>You should <span class="caps">NOT</span> delete anything from <code>seqdata</code>!</strong></h3>
<p><strong>Note:</strong> Data should not be processed in <code>seqdata</code>. Processing should happen in <code>scratch</code>.</p>
</li>
<li>
<p><code>/oasis/tscc/scratch/$USER</code>: your virtually unlimited temporary storage for storing intermediate files and outputs from compute jobs (800+ TBs of SSDs, shared). <strong>Optimized for faster read/write</strong>, so please try to do most of your processing here (and transfer to permanent storage&nbsp;later)!</p>
<p><strong>Note:</strong> Anything saved here is subject to deletion without warning after 3 months or less of storage. In particular, the large <code>.sam</code> and <code>.bam</code> files can get deleted, and you will have to re-run your&nbsp;analysis.</p>
</li>
</ul>
<p>Let&#8217;s link these directories for easy access from your home&nbsp;directory:</p>
<div class="highlight"><pre><span></span>ln -s /projects/ps-yeolab3/<span class="nv">$USER</span> <span class="nv">$HOME</span>/projects
ln -s /projects/ps-yeolab4/seqdata <span class="nv">$HOME</span>/seqdata
ln -s /oasis/tscc/scratch/<span class="nv">$USER</span> <span class="nv">$HOME</span>/scratch
</pre></div>


<h2>Let us see your&nbsp;stuff</h2>
<p>Make everything readable by other Yeo lab members and restrict access from other&nbsp;users</p>
<div class="highlight"><pre><span></span><span class="err">chmod -R g+r ~/</span>
<span class="err">chmod -R g+r ~/scratch/</span>
<span class="err">chmod -R o-rwx ~/</span>
<span class="err">chmod -R o-rwx ~/scratch/</span>
</pre></div>


<p>But <code>git</code> will get mad at you if your ~/.ssh keys private keys are visible by others, so make them visible to only you&nbsp;via:</p>
<div class="highlight"><pre><span></span><span class="err">chmod -R go-rwx ~/.ssh/</span>
</pre></div>


<h2>Add lab&nbsp;software</h2>
<ul>
<li><code>modules</code> are system-wide installations of programs and pipelines that are frequently used in the lab. However in order to access these modules, you’ll need to specify the path to where they&nbsp;exist.</li>
<li>Add the following two lines to your <code>.bashrc</code> file:</li>
</ul>
<div class="highlight"><pre><span></span><span class="err">module use /projects/ps-yeolab4/modulefiles</span>
<span class="err">module load yeolabmodules/0.0.2</span>
</pre></div>


<ul>
<li>source the <code>.bashrc</code> file to apply the above changes to your environment variables we’ve&nbsp;created.</li>
</ul>
<div class="highlight"><pre><span></span><span class="err">source ~/.bashrc</span>
</pre></div>


<ul>
<li>Test that you can load and unload a module (typing <code>module avail</code> will list every module we&nbsp;have):</li>
</ul>
<div class="highlight"><pre><span></span><span class="err">module load samtools</span>
<span class="err">module list</span>
<span class="err">module unload samtools</span>
</pre></div>


<h2>Add reference&nbsp;genomes</h2>
<p>To run the analysis pipeline, you will need to specify where the genomes are on <span class="caps">TSCC</span>, and you can do this by adding this line to your <code>~/.bashrc</code>:</p>
<div class="highlight"><pre><span></span><span class="err">GENOME=/projects/ps-yeolab4/genomes</span>
</pre></div>


<h2>Manage your terminal sessions with <code>Screen</code></h2>
<p><code>Screen</code> is an awesome tool which allows you to have multiple “tabs” open in the same login session, and you can easily transition between screens. Plus, they’re persistent, so you can leave something running in a screen session, log out of <span class="caps">TSCC</span>, and it will still be running!&nbsp;Amazing!</p>
<h3>Configure your <code>screen</code></h3>
<p><img alt="http://byee4.github.io/img/screen.png" src="http://byee4.github.io/img/screen.png"></p>
<p>To get a nice status bar at the bottom of your terminal window like this, get this <code>.screenrc</code> file:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="c1"># change directory to home</span>
wget https://raw.githubusercontent.com/olgabot/rcfiles/master/.screenrc
</pre></div>


<p><strong>Note:</strong> The control letter is <code>j</code>, not <code>a</code> in the documentation above, so for example to create a new window, do <code>Ctrl-j c</code> and to kill the current window, do <code>Ctrl-j k</code>. Do <code>Ctrl-j j</code> to switch between windows, and <code>Ctrl-j #</code>, where # is some window number, to switch to a numbered tab specifically (e.g. <code>Ctrl-j 2</code> to switch to tab number&nbsp;2.</p>
<h3>Using <code>screen</code></h3>
<p>Now to start a screen session&nbsp;do:</p>
<div class="highlight"><pre><span></span><span class="err">screen</span>
</pre></div>


<p>If you’re re-logging in and you have an old screen session, do this to “re-attach” the screen&nbsp;window.</p>
<div class="highlight"><pre><span></span><span class="err">screen -x</span>
</pre></div>


<p>Every time you log in to <span class="caps">TSCC</span>, you’ll want to reattach the screens from before, so the first step I always take when I log in to <span class="caps">TSCC</span> is exactly that, <code>screen -x</code>.</p>
<h2>Download and install&nbsp;Anaconda</h2>
<p>Download the Anaconda package manager using wget (web-get). The link below is from the Anaconda downloads page. This will be useful for installing and managing Python packages, R packages, and programs you will be&nbsp;using.</p>
<div class="highlight"><pre><span></span><span class="err">wget https://repo.anaconda.com/archive/Anaconda3-2019.10-Linux-x86_64.sh</span>
</pre></div>


<p>To install Anaconda, run the shell script with bash (this will take some time). It will ask you a bunch of questions, and use the defaults for them (press enter for&nbsp;all).</p>
<div class="highlight"><pre><span></span><span class="err">bash Anaconda3-2019.10-Linux-x86_64.sh</span>
</pre></div>


<p>To activate Anaconda, source your&nbsp;.bashrc:</p>
<div class="highlight"><pre><span></span><span class="err">source ~/.bashrc</span>
</pre></div>


<p>Make sure your Python is point to the Anaconda python&nbsp;with:</p>
<div class="highlight"><pre><span></span><span class="err">which python</span>
</pre></div>


<p>The output should look something&nbsp;like:</p>
<div class="highlight"><pre><span></span><span class="err">~/anaconda3/bin/python</span>
</pre></div></p>
        </section>
      </div>

  </section>

  <!-- Two -->
  <!--     <section class="wrapper style1 container special">
        <div class="row">
        </div>
    </section> -->

  </article>

<!-- Footer -->

<style>
#footer .mdi{
  font-size: 4em;
}
</style>

<footer id="footer">

    <ul class="icons">
        <li>
          <a href="http://github.com/yeolab" class="mdi mdi-github-circle"><span class="label"></span></a>
        </li>
        <li>
          <a href="http://twitter.com/yeo_lab" class="mdi mdi-twitter-circle"><span class="label"></span></a>
        </li>
    </ul>

    <span class="copyright">&copy; Yeo Lab. All rights reserved. Design: <a href="http://html5up.net">HTML5 UP</a>.</span>

</footer>
</body>
</html>